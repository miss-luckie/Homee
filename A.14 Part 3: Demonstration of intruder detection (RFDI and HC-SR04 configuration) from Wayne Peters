FUNCTION ultrasonic_loop:
WHILE continue_reading IS TRUE:
 SEND 10-microsecond trigger pulse to TRIG pin
 WAIT for echo start and echo end signals
 CALCULATE duration ← end - start
 CALCULATE distance ← duration * 17150 // convert to cm

 IF distance IS GREATER THAN 2 AND LESS THAN 10:
  DISPLAY "🚨 Intruder Detected!"
  LOCK lcd_lock
  CLEAR LCD
  DISPLAY "Intruder Detected!" on LCD
  UNLOCK lcd_lock

  LOG event "Intruder Detected" with placeholder ID

  SET flash_end_time ← current_time + 5 seconds
  WHILE current_time < flash_end_time:
   TURN ON red LED
   WAIT 0.2 seconds
   TURN OFF LED
   WAIT 0.2 seconds

  LOCK lcd_lock
  CLEAR LCD
  UNLOCK lcd_lock

 WAIT 1 second
